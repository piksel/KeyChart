<Window xmlns="https://github.com/avaloniaui"
               xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
               xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
               xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
               xmlns:util="clr-namespace:KeyChart.GUI.Util"
               xmlns:views="clr-namespace:KeyChart.GUI.Views"
               xmlns:fontAwesome="clr-namespace:KeyChart.Keyboards.FontAwesome;assembly=KeyChart.Keyboards"
               xmlns:design="clr-namespace:KeyChart.GUI.Design"
               xmlns:controls="clr-namespace:KeyChart.GUI.Controls"
               mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="780"
               x:Class="KeyChart.GUI.MainWindow"
               FontSize="14"
               Foreground="{StaticResource SystemBaseHighColor}"
               Background="Transparent"
               Icon="avares://KeyChart/Assets/icon.ico"
               TransparencyLevelHint="AcrylicBlur"
               ExtendClientAreaToDecorationsHint="True"
               x:Name="MainWindow"
               Initialized="StyledElement_OnInitialized"
               Activated="WindowBase_OnActivated"
               Deactivated="WindowBase_OnDeactivated"
               Closing="Window_OnClosing"
               Closed="TopLevel_OnClosed"
               d:DataContext="{x:Static design:DesignData.MainWindowViewModelLoading}"
               Title="KeyChart.Overlay">
    <Window.Styles>
        <Style Selector="TitleBar:fullscreen">
            <Setter Property="Background" Value="#7f000000" />
        </Style>
    </Window.Styles>
    <Window.Resources>
        <ExperimentalAcrylicMaterial x:Key="AcrylicMaterial"
            TintColor="#000000" MaterialOpacity="0.85" TintOpacity="1" 
            BackgroundSource="Digger" FallbackColor="Transparent" />
    </Window.Resources>
    <Panel Margin="{Binding #MainWindow.OffScreenMargin}">
        <DockPanel>
            <Border DockPanel.Dock="Top" 
                    d:DesignHeight="30"
                    MinHeight="30"
                    IsHitTestVisible="False"
                    Background="#80000000"
                    Height="{Binding #MainWindow.WindowDecorationMargin.Top, Mode=OneWay}">
                <StackPanel Orientation="Horizontal" IsHitTestVisible="False">
                    <Viewbox Margin="8" PointerPressed="InputElement_OnPointerPressed">
                        <Path Fill="White" Data="M392 128h-16C362.7 128 352 138.7 352 152v16C352 181.3 362.7 192 376 192h16C405.3 192 416 181.3 416 168v-16C416 138.7 405.3 128 392 128zM400 168c0 4.41-3.588 8-8 8h-16c-4.41 0-8-3.59-8-8v-16c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8V168zM488 128h-16C458.7 128 448 138.7 448 152v16C448 181.3 458.7 192 472 192h16C501.3 192 512 181.3 512 168v-16C512 138.7 501.3 128 488 128zM496 168c0 4.41-3.588 8-8 8h-16c-4.41 0-8-3.59-8-8v-16c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8V168zM184 192h16C213.3 192 224 181.3 224 168v-16C224 138.7 213.3 128 200 128h-16C170.7 128 160 138.7 160 152v16C160 181.3 170.7 192 184 192zM176 152c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8v16c0 4.41-3.588 8-8 8h-16C179.6 176 176 172.4 176 168V152zM280 288h16C309.3 288 320 277.3 320 264v-16C320 234.7 309.3 224 296 224h-16C266.7 224 256 234.7 256 248v16C256 277.3 266.7 288 280 288zM272 248c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8v16c0 4.41-3.588 8-8 8h-16C275.6 272 272 268.4 272 264V248zM392 224h-16C362.7 224 352 234.7 352 248v16C352 277.3 362.7 288 376 288h16C405.3 288 416 277.3 416 264v-16C416 234.7 405.3 224 392 224zM400 264c0 4.41-3.588 8-8 8h-16c-4.41 0-8-3.59-8-8v-16c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8V264zM280 192h16C309.3 192 320 181.3 320 168v-16C320 138.7 309.3 128 296 128h-16C266.7 128 256 138.7 256 152v16C256 181.3 266.7 192 280 192zM272 152c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8v16c0 4.41-3.588 8-8 8h-16C275.6 176 272 172.4 272 168V152zM512 64H64C28.65 64 0 92.65 0 128v256c0 35.35 28.65 64 64 64h448c35.35 0 64-28.65 64-64V128C576 92.65 547.3 64 512 64zM560 384c0 26.47-21.53 48-48 48H64c-26.47 0-48-21.53-48-48V128c0-26.47 21.53-48 48-48h448c26.47 0 48 21.53 48 48V384zM392 320h-208C170.7 320 160 330.7 160 344v16C160 373.3 170.7 384 184 384h208c13.26 0 24-10.75 24-24v-16C416 330.7 405.3 320 392 320zM400 360c0 4.41-3.588 8-8 8h-208c-4.41 0-8-3.59-8-8v-16c0-4.41 3.59-8 8-8h208c4.412 0 8 3.59 8 8V360zM104 224h-16C74.75 224 64 234.7 64 248v16C64 277.3 74.75 288 88 288h16C117.3 288 128 277.3 128 264v-16C128 234.7 117.3 224 104 224zM112 264c0 4.41-3.588 8-8 8h-16C83.59 272 80 268.4 80 264v-16c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8V264zM488 224h-16C458.7 224 448 234.7 448 248v16C448 277.3 458.7 288 472 288h16C501.3 288 512 277.3 512 264v-16C512 234.7 501.3 224 488 224zM496 264c0 4.41-3.588 8-8 8h-16c-4.41 0-8-3.59-8-8v-16c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8V264zM184 288h16C213.3 288 224 277.3 224 264v-16C224 234.7 213.3 224 200 224h-16C170.7 224 160 234.7 160 248v16C160 277.3 170.7 288 184 288zM176 248c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8v16c0 4.41-3.588 8-8 8h-16C179.6 272 176 268.4 176 264V248zM488 320h-16C458.7 320 448 330.7 448 344v16c0 13.25 10.75 24 24 24h16c13.26 0 24-10.75 24-24v-16C512 330.7 501.3 320 488 320zM496 360c0 4.41-3.588 8-8 8h-16c-4.41 0-8-3.59-8-8v-16c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8V360zM104 320h-16C74.75 320 64 330.7 64 344v16C64 373.3 74.75 384 88 384h16C117.3 384 128 373.3 128 360v-16C128 330.7 117.3 320 104 320zM112 360c0 4.41-3.588 8-8 8h-16c-4.41 0-8-3.59-8-8v-16c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8V360zM104 128h-16C74.75 128 64 138.7 64 152v16C64 181.3 74.75 192 88 192h16C117.3 192 128 181.3 128 168v-16C128 138.7 117.3 128 104 128zM112 168c0 4.41-3.588 8-8 8h-16C83.59 176 80 172.4 80 168v-16c0-4.41 3.59-8 8-8h16c4.412 0 8 3.59 8 8V168z" />
                    </Viewbox>
                    <TextBlock VerticalAlignment="Center" Text="KeyChart (alpha)"  />
                </StackPanel>
            </Border>
            <Border Background="#80000000" DockPanel.Dock="Bottom" Padding="5, 0, 5, 5">
                <DockPanel>
                    <StackPanel Orientation="Horizontal"
                                Spacing="5"
                                DockPanel.Dock="Left"
                    >
                        <Button Tag="overlay" Click="Button_OnClick">
                            <StackPanel Orientation="Horizontal" Spacing="5">
                                <TextBlock Classes="Symbol" 
                                           Text="{x:Static fontAwesome:Symbol.Eye}" 
                                           FontSize="16" />
                                <TextBlock Text="Overlay" />
                            </StackPanel>
                        </Button>
                        <Button Tag="import" Click="Button_OnClick">
                            <StackPanel Orientation="Horizontal" Spacing="5">
                                <TextBlock Classes="Symbol" 
                                           Text="{x:Static fontAwesome:Symbol.FileImport}" 
                                           FontSize="16" />
                                <TextBlock Text="Keyboard" />
                            </StackPanel>
                        </Button>
                        <Button Tag="console" Click="Button_OnClick">
                            <StackPanel Orientation="Horizontal" Spacing="5">
                                <TextBlock Classes="Symbol" 
                                           Text="{x:Static fontAwesome:Symbol.Terminal}" 
                                           FontSize="16" />
                                <TextBlock Text="Console" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal"
                                DockPanel.Dock="Right"
                                Spacing="5">
                        <Button Tag="reset" Click="Button_OnClick">
                            <StackPanel Orientation="Horizontal" Spacing="5">
                                <TextBlock Classes="Symbol" 
                                           Text="{x:Static fontAwesome:Symbol.Trash}" 
                                           FontSize="16" />
                                <TextBlock Text="Reset" />
                            </StackPanel>
                        </Button>
                        <Button Tag="loading" Click="Button_OnClick">
                            <StackPanel Orientation="Horizontal" Spacing="5">
                                <TextBlock Classes="Symbol" 
                                           Text="{x:Static fontAwesome:Symbol.Loader}" 
                                           FontSize="16" />
                                <TextBlock Text="Loading" />
                            </StackPanel>
                        </Button>
                    </StackPanel>
                    <Panel />
                </DockPanel>
            </Border>
            <Border Background="#80000000" Padding="10"  
                    HorizontalAlignment="Stretch">
                <DockPanel
                    
                >
                    <Border DockPanel.Dock="Bottom" Height="200">
                        <views:ConsoleView DataContext="{Binding Console}" />
                    </Border>

                    <!-- IsPaneOpen="{Binding Console, Converter={x:Static ObjectConverters.IsNotNull}}"> -->
                    <Grid>
                        <Border IsVisible="{Binding Loaded}" MaxWidth="1000" HorizontalAlignment="Center">
                            <views:KeyboardView Name="KeyboardView" 
                                                DataContext="{Binding KeyboardViewModel}" 
                                                HorizontalAlignment="Stretch"
                                                HorizontalContentAlignment="Stretch" />
                        </Border>
                        <Border IsVisible="{Binding !Loaded}" 
                                HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Background="#80000000"
                                Padding="20" Width="300">
                            <controls:LoadingIndicator
                                Foreground="White" 
                                PrimaryColor="Orange"
                                SecondaryColor="Magenta"
                                Message="Reticulating Splines..."
                            />
                        </Border>
                    </Grid>
                </DockPanel>
            </Border>
        </DockPanel>
    </Panel>
</Window>
